{"ast":null,"code":"/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/** \n * @file transfer.js\n * @author Marek Kotewicz <marek@ethdev.com>\n * @date 2015\n */\n\nvar Iban = require('./iban');\nvar exchangeAbi = require('../contracts/SmartExchange.json');\n\n/**\n * Should be used to make Iban transfer\n *\n * @method transfer\n * @param {String} from\n * @param {String} to iban\n * @param {Value} value to be tranfered\n * @param {Function} callback, callback\n */\nvar transfer = function (eth, from, to, value, callback) {\n  var iban = new Iban(to);\n  if (!iban.isValid()) {\n    throw new Error('invalid iban address');\n  }\n  if (iban.isDirect()) {\n    return transferToAddress(eth, from, iban.address(), value, callback);\n  }\n  if (!callback) {\n    var address = eth.icapNamereg().addr(iban.institution());\n    return deposit(eth, from, address, value, iban.client());\n  }\n  eth.icapNamereg().addr(iban.institution(), function (err, address) {\n    return deposit(eth, from, address, value, iban.client(), callback);\n  });\n};\n\n/**\n * Should be used to transfer funds to certain address\n *\n * @method transferToAddress\n * @param {String} from\n * @param {String} to\n * @param {Value} value to be tranfered\n * @param {Function} callback, callback\n */\nvar transferToAddress = function (eth, from, to, value, callback) {\n  return eth.sendTransaction({\n    address: to,\n    from: from,\n    value: value\n  }, callback);\n};\n\n/**\n * Should be used to deposit funds to generic Exchange contract (must implement deposit(bytes32) method!)\n *\n * @method deposit\n * @param {String} from\n * @param {String} to\n * @param {Value} value to be transfered\n * @param {String} client unique identifier\n * @param {Function} callback, callback\n */\nvar deposit = function (eth, from, to, value, client, callback) {\n  var abi = exchangeAbi;\n  return eth.contract(abi).at(to).deposit(client, {\n    from: from,\n    value: value\n  }, callback);\n};\nmodule.exports = transfer;","map":{"version":3,"names":["Iban","require","exchangeAbi","transfer","eth","from","to","value","callback","iban","isValid","Error","isDirect","transferToAddress","address","icapNamereg","addr","institution","deposit","client","err","sendTransaction","abi","contract","at","module","exports"],"sources":["E:/Career/University at Buffalo/Semester 2/CSE_Blockchain/Project/playground/research-papers-bid/node_modules/web3/lib/web3/transfer.js"],"sourcesContent":["/*\n    This file is part of web3.js.\n\n    web3.js is free software: you can redistribute it and/or modify\n    it under the terms of the GNU Lesser General Public License as published by\n    the Free Software Foundation, either version 3 of the License, or\n    (at your option) any later version.\n\n    web3.js is distributed in the hope that it will be useful,\n    but WITHOUT ANY WARRANTY; without even the implied warranty of\n    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n    GNU Lesser General Public License for more details.\n\n    You should have received a copy of the GNU Lesser General Public License\n    along with web3.js.  If not, see <http://www.gnu.org/licenses/>.\n*/\n/** \n * @file transfer.js\n * @author Marek Kotewicz <marek@ethdev.com>\n * @date 2015\n */\n\nvar Iban = require('./iban');\nvar exchangeAbi = require('../contracts/SmartExchange.json');\n\n/**\n * Should be used to make Iban transfer\n *\n * @method transfer\n * @param {String} from\n * @param {String} to iban\n * @param {Value} value to be tranfered\n * @param {Function} callback, callback\n */\nvar transfer = function (eth, from, to, value, callback) {\n    var iban = new Iban(to); \n    if (!iban.isValid()) {\n        throw new Error('invalid iban address');\n    }\n\n    if (iban.isDirect()) {\n        return transferToAddress(eth, from, iban.address(), value, callback);\n    }\n    \n    if (!callback) {\n        var address = eth.icapNamereg().addr(iban.institution());\n        return deposit(eth, from, address, value, iban.client());\n    }\n\n    eth.icapNamereg().addr(iban.institution(), function (err, address) {\n        return deposit(eth, from, address, value, iban.client(), callback);\n    });\n    \n};\n\n/**\n * Should be used to transfer funds to certain address\n *\n * @method transferToAddress\n * @param {String} from\n * @param {String} to\n * @param {Value} value to be tranfered\n * @param {Function} callback, callback\n */\nvar transferToAddress = function (eth, from, to, value, callback) {\n    return eth.sendTransaction({\n        address: to,\n        from: from,\n        value: value\n    }, callback);\n};\n\n/**\n * Should be used to deposit funds to generic Exchange contract (must implement deposit(bytes32) method!)\n *\n * @method deposit\n * @param {String} from\n * @param {String} to\n * @param {Value} value to be transfered\n * @param {String} client unique identifier\n * @param {Function} callback, callback\n */\nvar deposit = function (eth, from, to, value, client, callback) {\n    var abi = exchangeAbi;\n    return eth.contract(abi).at(to).deposit(client, {\n        from: from,\n        value: value\n    }, callback);\n};\n\nmodule.exports = transfer;\n\n"],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,IAAI,GAAGC,OAAO,CAAC,QAAQ,CAAC;AAC5B,IAAIC,WAAW,GAAGD,OAAO,CAAC,iCAAiC,CAAC;;AAE5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIE,QAAQ,GAAG,SAAAA,CAAUC,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAEC,QAAQ,EAAE;EACrD,IAAIC,IAAI,GAAG,IAAIT,IAAI,CAACM,EAAE,CAAC;EACvB,IAAI,CAACG,IAAI,CAACC,OAAO,EAAE,EAAE;IACjB,MAAM,IAAIC,KAAK,CAAC,sBAAsB,CAAC;EAC3C;EAEA,IAAIF,IAAI,CAACG,QAAQ,EAAE,EAAE;IACjB,OAAOC,iBAAiB,CAACT,GAAG,EAAEC,IAAI,EAAEI,IAAI,CAACK,OAAO,EAAE,EAAEP,KAAK,EAAEC,QAAQ,CAAC;EACxE;EAEA,IAAI,CAACA,QAAQ,EAAE;IACX,IAAIM,OAAO,GAAGV,GAAG,CAACW,WAAW,EAAE,CAACC,IAAI,CAACP,IAAI,CAACQ,WAAW,EAAE,CAAC;IACxD,OAAOC,OAAO,CAACd,GAAG,EAAEC,IAAI,EAAES,OAAO,EAAEP,KAAK,EAAEE,IAAI,CAACU,MAAM,EAAE,CAAC;EAC5D;EAEAf,GAAG,CAACW,WAAW,EAAE,CAACC,IAAI,CAACP,IAAI,CAACQ,WAAW,EAAE,EAAE,UAAUG,GAAG,EAAEN,OAAO,EAAE;IAC/D,OAAOI,OAAO,CAACd,GAAG,EAAEC,IAAI,EAAES,OAAO,EAAEP,KAAK,EAAEE,IAAI,CAACU,MAAM,EAAE,EAAEX,QAAQ,CAAC;EACtE,CAAC,CAAC;AAEN,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIK,iBAAiB,GAAG,SAAAA,CAAUT,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAEC,QAAQ,EAAE;EAC9D,OAAOJ,GAAG,CAACiB,eAAe,CAAC;IACvBP,OAAO,EAAER,EAAE;IACXD,IAAI,EAAEA,IAAI;IACVE,KAAK,EAAEA;EACX,CAAC,EAAEC,QAAQ,CAAC;AAChB,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAIU,OAAO,GAAG,SAAAA,CAAUd,GAAG,EAAEC,IAAI,EAAEC,EAAE,EAAEC,KAAK,EAAEY,MAAM,EAAEX,QAAQ,EAAE;EAC5D,IAAIc,GAAG,GAAGpB,WAAW;EACrB,OAAOE,GAAG,CAACmB,QAAQ,CAACD,GAAG,CAAC,CAACE,EAAE,CAAClB,EAAE,CAAC,CAACY,OAAO,CAACC,MAAM,EAAE;IAC5Cd,IAAI,EAAEA,IAAI;IACVE,KAAK,EAAEA;EACX,CAAC,EAAEC,QAAQ,CAAC;AAChB,CAAC;AAEDiB,MAAM,CAACC,OAAO,GAAGvB,QAAQ"},"metadata":{},"sourceType":"script","externalDependencies":[]}